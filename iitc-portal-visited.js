// ==UserScript==
// @id                       iitc-plugin-portal-visited @takurua Edited by @LindoEri
// @name                     IITC plugin: Show portal visited
// @category            Layer
// @version             1.1.1
// @namespace           https://github.com/LindoEri/iitc-portal-visited
// @downloadURL         https://raw.githubusercontent.com/LindoEri/iitc-portal-visited/main/iitc-portal-visited.js
// @updateURL           https://raw.githubusercontent.com/LindoEri/iitc-portal-visited/main/iitc-portal-visited.js
// @include             *://*.ingress.com/intel*
// @include             *://intel.ingress.com/*
// @match               *://*.ingress.com/intel*
// @match               *://intel.ingress.com/*
// @grant               none
// ==/UserScript==


function wrapper(plugin_info) {
    if(typeof window.plugin !== 'function') window.plugin = function() {};
    plugin_info.buildName = 'iitc';
    plugin_info.dateTimeVersion = '20210207.175700';
    plugin_info.pluginId = 'upcv';

    // PLUGIN START ////////////////////////////////////////////////////////
    window.plugin.upcv = function() {
    };

    window.plugin.upcv.Layers = {};
    window.plugin.upcv.upcvLayerGroup = null;
    window.plugin.upcv.scoutLayerGroup = null;

    window.plugin.upcv.removeFlag = function(guid,type) {
        var previousLayer = window.plugin.upcv.Layers[guid];
        if(previousLayer){
            if (type == 1 || type ==2) {
                window.plugin.upcv.upcvLayerGroup.removeLayer(previousLayer);
            }else if (type == 4) {
                window.plugin.upcv.scoutLayerGroup.removeLayer(previousLayer);
            }
            delete plugin.upcv.Layers[guid];
        }
    }

    window.plugin.upcv.addFlag = function(guid,latLng,type) {
        window.plugin.upcv.removeFlag(guid,type);
        var p = window.portals[guid];
        var iconurl = "";
        var iconSize = 15;
        var layergroup = null;
        if(type == 1){
            iconurl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHKWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI4M2QzNjMzLWUwYTgtNjY0Mi04Mzg3LWNlMDRmNTU3NWFlYyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmFmMDg0OTA3LWYzYmUtZGE0Zi1iYjRiLTEwOGU2ZDMxMmY3ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjAzZmI4MWMzLTY0YjItNGRkOC1hNTljLTVhMjhmYWU5NzE4MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDlUMTk6Mjg6NTUrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTA5VDE5OjM0OjM4KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTA5VDE5OjM0OjM4KzA4OjAwIiB0aWZmOk9yaWVudGF0aW9uPSIxIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M2U5MGU2MmEtZDM5Ni00MWU5LWI0YjAtOGMxZTkxMjJlODU3IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MmI2NWQ2YmUtMGZmNC0zMDQwLThhZDYtMWMwNmEyYTQ2NjVhIi8+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjMxOWE2MTI0LTI0NzctN2Q0NC04NTZmLWU2YzhlMDRjNWUzMyIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0wOVQxOTozMzoyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyODNkMzYzMy1lMGE4LTY2NDItODM4Ny1jZTA0ZjU1NzVhZWMiIHN0RXZ0OndoZW49IjIwMjEtMDItMDlUMTk6MzQ6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0i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";
            iconSize = 15;
            layergroup = plugin.upcv.upcvLayerGroup;
        }
        if(type == 2){
            iconurl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHKWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmQxZTE1MWE4LWFmOTgtNDI0ZS1hODgwLTc3YTA4M2FhOGE2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmZkOWFjM2NlLWFjZjItZDQ0OC05NzlkLTgwYzI5MDVhYWUzOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjAzZmI4MWMzLTY0YjItNGRkOC1hNTljLTVhMjhmYWU5NzE4MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDlUMTk6Mjg6NTUrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTA5VDE5OjMzOjQwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTA5VDE5OjMzOjQwKzA4OjAwIiB0aWZmOk9yaWVudGF0aW9uPSIxIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M2U5MGU2MmEtZDM5Ni00MWU5LWI0YjAtOGMxZTkxMjJlODU3IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MmI2NWQ2YmUtMGZmNC0zMDQwLThhZDYtMWMwNmEyYTQ2NjVhIi8+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjMxOWE2MTI0LTI0NzctN2Q0NC04NTZmLWU2YzhlMDRjNWUzMyIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0wOVQxOTozMzoyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkMWUxNTFhOC1hZjk4LTQyNGUtYTg4MC03N2EwODNhYThhNmQiIHN0RXZ0OndoZW49IjIwMjEtMDItMDlUMTk6MzM6NDArMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0i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";
            iconSize = 15;
            layergroup = plugin.upcv.upcvLayerGroup;
        }
        if(type == 4){
            iconurl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAAKZlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgExAAIAAAAhAAAAWodpAAQAAAABAAAAfAAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIDIyLjEgKE1hY2ludG9zaCkAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAB4oAMABAAAAAEAAAB4AAAAAG6hrMYAAAAJcEhZcwAACxMAAAsTAQCanBgAAASVaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6OEFEQzY1QzA1NDY1MTFFQkJFOTdFOTNFNjNDOEUwNjI8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPnhtcC5kaWQ6OEFEQzY1QzE1NDY1MTFFQkJFOTdFOTNFNjNDOEUwNjI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDow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"
            iconSize = 30;
            layergroup = plugin.upcv.scoutLayerGroup;
        }

        var flag = L.marker(latLng, {
            interactive: false,
            icon: L.icon({
            iconUrl: iconurl,
            iconAnchor: [iconSize/2, iconSize/2],
            iconSize: [iconSize, iconSize],
            className: 'no-pointer-events'
            })
        });
        plugin.upcv.Layers[guid] = flag;
        flag.addTo(layergroup);
    }

    window.plugin.upcv.updatePortalFlag = function() {
        if (!map.hasLayer(window.plugin.upcv.upcvLayerGroup) &&
            !map.hasLayer(window.plugin.upcv.scoutLayerGroup))
            {
        return;
        }
        var showupcv = false
        var showscout = false
        var type = 0
        if (map.hasLayer(window.plugin.upcv.upcvLayerGroup)){
            showupcv = true
        }
        if (map.hasLayer(window.plugin.upcv.scoutLayerGroup)){
            showscout = true
        }

        for (var guid in window.portals) {
            var p = window.portals[guid];
            if (p._map && p.options.data.title) {
                type = p.options.ent[2][18];

                if (showupcv && type & 2) {
                    window.plugin.upcv.addFlag(guid, p.getLatLng(), 2);
                }else if(showupcv && type & 1){
                    window.plugin.upcv.addFlag(guid, p.getLatLng(), 1);
                }

                if (showscout && type & 4) {
                    window.plugin.upcv.addFlag(guid, p.getLatLng(), 4);
                }

            }
        }
    }

    window.plugin.upcv.delayedUpdatePortalFlag = function(wait) {
        if (window.plugin.upcv.timer === undefined) {
            window.plugin.upcv.timer = setTimeout (function() {
                window.plugin.upcv.timer = undefined;
                window.plugin.upcv.updatePortalFlag();
            }, wait*1000);
        }
    }

    window.plugin.upcv.createLayer = function() {
        window.plugin.upcv.upcvLayerGroup = new L.FeatureGroup();
        window.plugin.upcv.scoutLayerGroup = new L.FeatureGroup();
        window.plugin.upcv.notupcvLayerGroup = new L.FeatureGroup();
        window.plugin.upcv.notscoutLayerGroup = new L.FeatureGroup();

        window.addLayerGroup('UPC/V', window.plugin.upcv.upcvLayerGroup, true);
        window.addLayerGroup('Scout Controller', window.plugin.upcv.scoutLayerGroup, true);

        window.addHook('requestFinished', function() { setTimeout(function(){window.plugin.upcv.delayedUpdatePortalFlag(3.0);},1); });
        window.addHook('mapDataRefreshEnd', function() { window.plugin.upcv.delayedUpdatePortalFlag(0.5); });
        window.map.on('overlayadd overlayremove', function() { setTimeout(function(){window.plugin.upcv.delayedUpdatePortalFlag(1.0);},1); });
    }


    var setup = function() {
        window.plugin.upcv.createLayer();
    }
    // PLUGIN END //////////////////////////////////////////////////////////
    setup.info = plugin_info;
    if(!window.bootPlugins) window.bootPlugins = [];
    window.bootPlugins.push(setup);
    if(window.iitcLoaded && typeof setup === 'function') setup();
}
var script = document.createElement('script');
var info = {};
if (typeof GM_info !== 'undefined' && GM_info && GM_info.script) info.script = { version: GM_info.script.version, name: GM_info.script.name, description: GM_info.script.description };
script.appendChild(document.createTextNode('('+ wrapper +')('+JSON.stringify(info)+');'));
(document.body || document.head || document.documentElement).appendChild(script);
